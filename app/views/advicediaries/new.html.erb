<div class="container">
  <nav class="navbar navbar-expand-lg navbar-transparent navbar-absolute fixed-top ">
    <div class="container-fluid">
      <div class="navbar-wrapper">
        <a class="navbar-brand" href="javascript:;">AdviceDiary</a>
      </div>
      <button class="navbar-toggler" type="button" data-toggle="collapse" aria-controls="navigation-index" aria-expanded="false" aria-label="Toggle navigation">
        <span class="sr-only">Toggle navigation</span>
        <span class="navbar-toggler-icon icon-bar"></span>
        <span class="navbar-toggler-icon icon-bar"></span>
        <span class="navbar-toggler-icon icon-bar"></span>
      </button>
      <div class="collapse navbar-collapse justify-content-end">
        <ul class="navbar-nav">
          <li class="nav-item dropdown">
            <a class="nav-link" href="http://example.com" id="navbarDropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              <i class="material-icons">notifications</i>
              <span class="notification">✓</span>
              <p class="d-lg-none d-md-block">
                Some Actions
              </p>
            </a>
            <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdownMenuLink">
              <!--freeプラン以外（有料プラン）で目標目的両方入力していない場合-->
              <% if current_user.plan != 'free' && current_user.idealweight.blank? && current_user.useradvice.blank? %>
                <%= link_to "Bodymake目標／目的を入力", new_idealweight_path, class: "dropdown-item" %>
              <!--freeプラン以外（有料プラン）で目標のみ未入力の場合（基本ないけど）-->
              <% elsif current_user.plan != 'free' && current_user.idealweight.present? && current_user.useradvice.blank? %>
                <%= link_to "Bodymake目標を入力", new_useradvice_path, class: "dropdown-item" %>
              <!--freeプラン以外（有料プラン）で目的のみ未入力の場合-->
              <% elsif current_user.plan != 'free' && current_user.idealweight.blank? && current_user.useradvice.present? %>
                <%= link_to "Bodymake目的を入力", new_idealweight_path, class: "dropdown-item" %>
              <!--freeプラン以外（有料プラン）で全て入力済みの場合-->
              <% elsif current_user.plan != 'free' && current_user.idealweight.present? && current_user.useradvice.present? %>
                <%= link_to "通知はありません", "", class: "dropdown-item" %>
              <!--freeプランの場合-->
              <% elsif current_user.plan == 'free' %>
                <%= link_to "通知はありません", "", class: "dropdown-item" %>
              <% end %>
            </div>
          </li>
          <li class="nav-item dropdown">
            <a class="nav-link" href="javascript:;" id="navbarDropdownProfile" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              <i class="material-icons">person</i>
              <p class="d-lg-none d-md-block">
                Account
              </p>
            </a>
            <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdownProfile">
              <%= link_to "Profile", user_path(current_user), class: "dropdown-item" %>
              <%= link_to "Settings", "/settings", class: "dropdown-item" %>
              <%= link_to "PlanChange?", plancheck_users_path(current_user), class: "dropdown-item" %>
              <div class="dropdown-divider"></div>
              <%= link_to "Log out", destroy_user_session_path, method: :delete, class: 'dropdown-item' %>
            </div>
          </li>
        </ul>
      </div>
    </div>
  </nav>
  <div class="row">
    <div class="col-sm-12 col-md-6 col-lg-6 mx-auto text-center">
      <div class="card rounded-0 p-0 shadow-sm" >
        <%= image_tag "oji_1.png", class: "card-img-top", width: "50%;", height: "300rem;" %>
        <div class="card-body text-left">
          <h5 class="card-title">Today's menu</h5>
          <table class="table table-sm">
            <thead class="thead-light">
              <tr>
                <th class="text-left"><small>メニュー</small></th>
                <th class="text-right"><small>最低回数</small></th>
                <th class="text-right"><small>最高回数</small></th>
                <th class="text-right"><small>セット数</small></th>
              </tr>
            </thead>
            <tbody>
              <% @advicemenus.each do |advicemenu| %>
                <tr>
                  <td class="text-left"><%= advicemenu.menu %></td>
                  <td class="text-right"><%= advicemenu.minimam_reps %>回</td>
                  <td class="text-right"><%= advicemenu.max_reps %>回</td>
                  <td class="text-right"><%= advicemenu.sets %>s</td>
                </tr>
              <% end %>
            </tbody>
          </table>
          <p class="card-text">
            <small class="text-muted">※マシンの空き状況に応じて選定してください.<br>トレーニング動画及び同じ役割のトレーニングを知りたい方は下記より確認してください.</small>
          </p>
          <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModalLong">
            トレーニング動画
          </button>
          <div class="modal fade" id="exampleModalLong" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle" aria-hidden="true">
            <div class="modal-dialog" role="document">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="exampleModalLongTitle">Check!</h5>
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                  </button>
                </div>
                <div class="modal-body">
                  <p>新しいタブが開きます</p>
                  <small>知りたい動画をチェックしてみてください</small><br>
                  <small>2~3分の短い動画でトレーニングのやり方を知ることができます</small>
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                  <%= link_to "トレーニング動画", "/howtovideos/", class: 'btn btn-raised btn-rose', target: "_blank" %>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <div class="row">
    <div class="col-md-12">
      <div class="card">
        <div class="card-header card-header-success">
          <h4 class="card-title ">トレーニングを記録する</h4>
          <p class="card-category"> Please enter the training you actually did.</p>
        </div>
        <div class="card-body">
          <div class="table-responsive">
            <table class="table table-bordered" style="table-layout:fixed;">
              <thead class="thead-light">
                <tr>
                  <th style="width:150px;"><small>日付</small></th>
                  <th style="width:200px;"><small>メニュー</small></th>
                  <th style="width:80px;"><small>重量</small></th>
                  <th style="width:80px;"><small>回数</small></th>
                  <th style="width:80px;"><small>重量</small></th>
                  <th style="width:80px;"><small>回数</small></th>
                  <th style="width:80px;"><small>重量</small></th>
                  <th style="width:80px;"><small>回数</small></th>
                  <th style="width:200px"><small>Memo</small></th>
                </tr>
              </thead>
              <tbody>
                <%= form_for(@form, url: advicediaries_path, method: :post) do |fb| %>
                <%= fb.fields_for :advicediaries do |f| %>
                <tr>
                  <td><%= f.date_field :date, placeholder: 'date', class: 'form-control' %></td>
                  <td><%= f.collection_select :advicemenu_id, Advicemenu.all, :id, :menu, { include_blank: '選択してください'}, class: 'form-control' %></td>
                  <td><%= f.number_field :weight, placeholder: 'kg', class: 'form-control' %></td>
                  <td><%= f.number_field :reps, placeholder: 'reps', class: 'form-control' %></td>
                  <td><%= f.number_field :weightsecond, placeholder: 'kg', class: 'form-control' %></td>
                  <td><%= f.number_field :repssecond, placeholder: 'reps', class: 'form-control' %></td>
                  <td><%= f.number_field :weightthird, placeholder: 'kg', class: 'form-control' %></td>
                  <td><%= f.number_field :repsthird, placeholder: 'reps', class: 'form-control' %></td>
                  <td><%= f.text_field :memo, placeholder: 'memo', class: 'form-control' %></td>
                  <%= f.hidden_field :user_id, value: current_user.id %>
                  <%= f.hidden_field :idealweight_id, value: current_user.idealweight.id %>
                  <%= f.hidden_field :useradvice_id, value: current_user.useradvice.id %>
                </tr>
                <% end %>
              </tbody>
            </table>
          </div>
          <thead>
            <tr>
              <td><%= fb.submit "登録する", class: "btn btn-raised btn-success" %></td>
            </tr>
          </thead>
            <% end %>
            <br><small class="text-muted">※マシンがポンド表記の場合（1lb (ポンド) = 0.45kg）／左記参考にしていただきながらキログラム表記で登録ください<br>
            100lbの場合 = 100lb × 0.45 => 約45kg</small>
        </div>
      </div>
    </div>
  </div>
</div>

